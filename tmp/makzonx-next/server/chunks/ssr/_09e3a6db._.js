module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},78130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71987),e=a.i(20237);a.i(69387);var f=a.i(60574),g=a.i(96221);let h=(0,a.i(70106).default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var i=a.i(16201),j=a.i(3314),k=a.i(87532),l=a.i(56025),m=a.i(87552);function n(){let{user:a}=(0,l.useAuth)(),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("date"),x=async()=>{q(!0);try{let a=(0,f.query)((0,f.collection)(e.db,"users"),(0,f.orderBy)("createdAt","desc")),b=await (0,f.getDocs)(a),c=[];b.forEach(a=>{c.push(a.data())}),o(c)}catch(a){console.error("Error fetching users:",a)}finally{q(!1)}};(0,c.useEffect)(()=>{x()},[]);let y=async b=>{if(b.uid===a?.uid)return void alert("You cannot ban yourself.");let c="active"===b.status?"banned":"active";if(confirm("banned"===c?`Ban ${b.displayName}?`:`Unban ${b.displayName}?`)){s(b.uid);try{await (0,f.updateDoc)((0,f.doc)(e.db,"users",b.uid),{status:c}),o(a=>a.map(a=>a.uid===b.uid?{...a,status:c}:a))}catch(a){console.error("Error updating user status:",a),alert("Failed to update user status")}finally{s(null)}}},z=async b=>{if(b.uid===a?.uid)return void alert("You cannot change your own role.");let c="user"===b.role?"admin":"user";if(confirm("admin"===c?`Make ${b.displayName} an Admin?`:`Remove Admin privileges from ${b.displayName}?`)){s(b.uid);try{await (0,f.updateDoc)((0,f.doc)(e.db,"users",b.uid),{role:c}),o(a=>a.map(a=>a.uid===b.uid?{...a,role:c}:a))}catch(a){console.error("Error updating user role:",a),alert("Failed to update user role")}finally{s(null)}}},A=n.filter(a=>{if(!t)return!0;let b=t.toLowerCase();return(a.displayName||"").toLowerCase().includes(b)||(a.email||"").toLowerCase().includes(b)}).sort((a,b)=>{if("role"===v)return"admin"===a.role&&"admin"!==b.role?-1:+("admin"!==a.role&&"admin"===b.role);if("status"===v){if("banned"===a.status&&"banned"!==b.status)return -1;if("banned"!==a.status&&"banned"===b.status)return 1}return 0});return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:m.default.pageHeader,children:[(0,b.jsx)("h1",{className:m.default.pageTitle,children:"User Management"}),(0,b.jsxs)("p",{className:m.default.pageSubtitle,children:[n.length," registered user",1!==n.length?"s":""]})]}),(0,b.jsxs)("div",{className:m.default.toolbar,children:[(0,b.jsx)("div",{className:m.default.filterPills,children:["date","role","status"].map(a=>(0,b.jsxs)("button",{onClick:()=>w(a),className:`${m.default.filterPill} ${v===a?m.default.filterPillActive:""}`,children:["Sort: ",a.charAt(0).toUpperCase()+a.slice(1)]},a))}),(0,b.jsxs)("div",{className:m.default.searchBox,children:[(0,b.jsx)(k.Search,{size:16,className:m.default.searchIcon}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:t,onChange:a=>u(a.target.value),className:m.default.searchInput})]})]}),p?(0,b.jsx)("div",{className:m.default.loaderWrap,children:(0,b.jsx)(g.Loader2,{className:m.default.spinner,size:36,style:{animation:"spin 1s linear infinite"}})}):(0,b.jsxs)("div",{className:m.default.card,children:[(0,b.jsx)("div",{className:m.default.tableWrap,children:(0,b.jsxs)("table",{className:m.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"User"}),(0,b.jsx)("th",{children:"Role"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Joined"}),(0,b.jsx)("th",{style:{textAlign:"right"},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:A.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:m.default.userCell,children:[a.photoURL?(0,b.jsx)(d.default,{src:a.photoURL,alt:a.displayName,width:36,height:36,className:m.default.userAvatar}):(0,b.jsx)("div",{className:m.default.userAvatarPlaceholder,children:a.displayName?.charAt(0)||"?"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:m.default.userName,children:a.displayName}),(0,b.jsx)("div",{className:m.default.userEmail,children:a.email})]})]})}),(0,b.jsx)("td",{children:(0,b.jsxs)("span",{className:`${m.default.roleBadge} ${"admin"===a.role?m.default.roleBadgeAdmin:m.default.roleBadgeUser}`,children:["admin"===a.role&&(0,b.jsx)(j.Shield,{size:10}),a.role]})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`${m.default.statusBadge} ${"active"===a.status?m.default.statusActive:m.default.statusBanned}`,children:a.status})}),(0,b.jsx)("td",{children:a.createdAt?.seconds?new Date(1e3*a.createdAt.seconds).toLocaleDateString():"N/A"}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:m.default.userActionsCell,children:[(0,b.jsx)("button",{onClick:()=>z(a),disabled:r===a.uid,title:"user"===a.role?"Promote to Admin":"Demote to User",className:m.default.userActionBtn,style:"admin"===a.role?{color:"#c084fc"}:{},children:(0,b.jsx)(j.Shield,{size:16})}),(0,b.jsx)("button",{onClick:()=>y(a),disabled:r===a.uid,title:"active"===a.status?"Ban User":"Unban User",className:m.default.userActionBtn,style:"banned"===a.status?{color:"#f87171"}:{},children:"active"===a.status?(0,b.jsx)(h,{size:16}):(0,b.jsx)(i.CheckCircle,{size:16})})]})})]},a.uid))})]})}),0===A.length&&(0,b.jsx)("div",{className:m.default.emptyState,children:t?`No users match "${t}"`:"No users found."})]})]})}a.s(["default",()=>n],78130)}];

//# sourceMappingURL=_09e3a6db._.js.map